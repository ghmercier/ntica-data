---
title: "TD PLU Bioclimatique"
format: html
---

Dans ce TD, nous allons mettre en pratique quelques compétences acquises
dans les séances précédentes — et en acquérir de nouvelles — sur un cas
d'étude : le PLU Bioclimatique parisien.

Pour mémoire, la Ville de Paris a adopté en novembre 2024 son nouveau plan
local d'urbanisme. La mise en révision avait été engagée en décembre 2020.
Après une phase de concertation, le Conseil de Paris avait arrêté en juin
2023 un projet de PLU, qui a fait l'objet d'une enquête publique au tout
début de 2024.

À cette époque, le dossier d'enquête publique consistait en une multitude
de gros fichiers PDF : pas de géoportail, pas de couches SIG… Si l'on
voulait exploiter les données, il fallait se débrouiller.

Nous allons voir comment !


## Les planches graphiques au 1/2000e

Dans le PLU, l'une des pièces-clés est l'atlas des planches au 1/2000e.
Ces planches regroupent toutes les règles d'urbanisme applicables sur le
territoire parisien. Elles représentent une traduction graphique du
règlement écrit.

Cet atlas est aujourd'hui accessible en ligne sur le site 
[Règles d'urbanisme de Paris](https://regles-urbanisme.paris.fr/).



### Une première planche

Notre objectif : afficher la planche D-05 dans QGIS. Pour cela, on va
la télécharger, la traiter et la géoréférencer.


#### Téléchargement

- Cliquer sur la carte interactive dans le rectangle D-05
- Dans la pop-up qui surgit, cliquer sur Vue pour télécharger la planche
  au format PDF.

[![](/resources/plu-bio/atlas_planches.jpeg)](https://regles-urbanisme.paris.fr/plu-bioclimatique/jsp/site/Portal.jsp?document_id=198&portlet_id=45#consultation_html)


#### Traitement

Nous avons un fichier PDF. Il nous faut le convertir au format image, 
puis éliminer le cartouche pour ne conserver que la carte. On peut par
exemple utiliser GIMP. Pour aller plus vite, l'image retraitée est
téléchargeable [ici](https://www.normalesup.org/~gmercier/D_05.jpg).

![](/resources/plu-bio/gimp_rognage.jpeg)


#### Géoréférencement

Géoréférencer une image, c'est associer à chacun des pixels qui la composent
une coordonnée géographique. Pour cela, il suffit de donner à QGIS les
coordonnées de quelques points de contrôle (aussi appelés points d'appuis). Il
se charge d'interpoler tous les autres.


##### Couche de référence

La qualité du géoréférencement dépend donc en grande partie du choix des
points de contrôle. Pour être le plus précis possible, on va charger dans
QGIS l'une des couches utilisée par l'APUR pour établir les cartes du PLU :
la couche de 
l'[emprise bâtie de Paris](https://opendata.apur.org/datasets/Apur::emprise-batie-paris/about).

Ce sera l'occasion d'apprendre comment utiliser des géoservices pour
afficher un flux sans téléchargement préalable, puisque l'APUR utilise 
ArcGIS Server.

- Créer un projet vide dans QGIS
- Sélectionner le SCR 2154 (RGF93v1 / Lambert-93)
- Couche > Ajouter une couche > Ajouter une couche de serveur ArcGIS REST
- URL du serveur : [https://carto2.apur.org/apur/rest/services/OPENDATA/](https://carto2.apur.org/apur/rest/services/OPENDATA/)

![](/resources/plu-bio/arcgis_rest.jpeg)

- Sélectionner la couche `EMPRISE_BATIE_PARIS`, `Période de construction`,
  celle au format raster, cela se chargera plus rapidement.

![](/resources/plu-bio/arcgis_emprises.jpeg)


##### Géocodage

Ouvrir l'outil de géoréférencement.

- Couche > Géoréférencer
- Fichier > Ouvrir un raster
- Choisir le fichier `D_05.jpg`

On définit ensuite les paramètres de la transformation, en conservant les
paramètres proposés par défaut (transformation linéaire, ré-échantillonnage
plus proche voisin) mais en cochant la case "créer seulement un fichier
World".

![](/resources/plu-bio/parametres_transformation.jpeg)

Puis, avec l'outil prévu à cet effet, sélectionner des points de contrôle,
en cliquant successivement sur un point de l'image puis le même point sur la
carte. On peut ici se contenter de trois points non alignés et distants les
uns des autres. À partir de 3 points, QGIS calcule les erreurs de
géoréférencement : en règle générale, il est bon d'avoir des écarts
inférieurs à 10 pixels.

Les points de contrôles utilisés dans l'image ci-dessous sont téléchargeables
[ici](/resources/plu-bio/D_05.jpg.points). On peut les charger si on le 
souhaite.

![](/resources/plu-bio/points-de-controles.jpeg)

Appliquer ensuite la transformation. La carte s'affiche à son emplacement à
Paris, on peut vérifier la qualité du géoréférencement en appliquant une
légère transparence.

![](/resources/plu-bio/carte_georeferencee.jpeg)


### Toutes les planches

Nous avons téléchargé 1 planche. Comment télécharger l'ensemble de l'atlas,
composé de 134 planches ?

<details>

<summary>Solution</summary>

On remarque tout d'abord qu'une 
[liste des planches](https://regles-urbanisme.paris.fr/plu-bioclimatique/servlet/plugins/document/resource?id=751&id_attribute=93&working_content=true) 
est disponible.

C'est un fichier PDF qui compile les liens vers les 134 planches. 
Problème : les liens ne sont pas apparents. 
On peut toujours cliquer manuellement sur les 134 liens, mais c'est long...

Pour l'éviter, plusieurs options : 

- Solution NoCode : extraire la liste des liens avec un utilitaire en ligne
  comme [Supertool](https://supertool.org/fr/extract-urls-and-links-from-pdfs/).
- Solution Code : extraire la liste des liens avec un court script Python, 
  qui mobilise la librairie [`PyMuPDF`](https://github.com/pymupdf/pymupdf).

```{python}
# Test de code
```

</details>
